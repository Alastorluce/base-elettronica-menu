<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- già presente -->
  <title>Base Elettronica Service - Menu</title>
  <link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">
  <style>
     
     /* disabilita selezione di testo e immagini */
    *, *::before, *::after {
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
     
    @keyframes fadeImage {from { opacity: 0; }to   { opacity: 1; }}
    @keyframes slideInLogo { from { transform: translateX(-100%); opacity: 0;} to { transform: translateX(0); opacity: 1;} }
    @keyframes slideInSidebar { from { transform: translateX(-100%); opacity: 0;} to { transform: translateX(0); opacity: 1;} }
    @keyframes slideIn { from { transform: translateX(-100%); opacity: 0;} to { transform: translateX(0); opacity: 1;} }
    @keyframes pulse {0%,100% { transform: translate(-50%, -50%) scale(1); }50%     { transform: translate(-50%, -50%) scale(1.1); }}
    



    

    /* **2**: warning nascosto di default */
#orientation-warning {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #000;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.orientation-content { padding: 20px; }
.orientation-content p {
  color: #00a6ff;
  font-size: 1.2em;
  margin-top: 15px;
  font-family: 'Varela Round', sans-serif;
}

#showroom-orientation {
      display: none;
      position: fixed;
      inset: 0;
      background: #000;
      z-index: 10000;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #00a6ff;
      font-family: 'Varela Round', sans-serif;
      padding: 2em;
    }
    /* Quando serve mostrarlo */
    #showroom-orientation.show {
      display: flex !important;
    }

    /* Layout generale */
    body {
      margin: 0;
      background: #000;
      font-family: 'Varela Round', sans-serif;
      color: #fff;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    #sidebar {
      width: 240px;
      background: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1em;
      box-shadow: 2px 0 10px rgba(0, 166, 255, 0.2);
      z-index: 2;
      height: 100vh;
      flex-shrink: 0;
      opacity: 0;
      transform: translateX(-100%);
    }
    #sidebar.animated { animation: slideInSidebar 0.6s ease-out forwards; }

    #sidebar-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
    }

    #sidebar-logo {
      margin-bottom: 2em;
      width: 180px;                /* container sempre 120px */
      height: auto;
      cursor: pointer;
      transition: transform 0.3s ease;
  
    }

    #sidebar-logo img {
      width: 100%;
      height: auto;
      display: block;
      filter: brightness(90%) saturate(0%) contrast(150%) invert(10%);
      transition: transform 0.25s ease;
    }

/* quando premi, scala l'immagine al 83% e torna al rilascio */
    #sidebar-logo:active img {transform: scale(0.83);}

    #sidebar-logo:hover { transform: scale(1.05); }  

    #right-glow {
      position: absolute;
      top: 0; right: 0;
      width: 2px; height: 100%;
      pointer-events: none;
      box-shadow:
    0 0 6px rgba(0, 166, 255, 0.2),
    0 0 12px rgba(0, 166, 255, 0.3);
      z-index: 1;
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    .menu-item {
      background: rgba(0,0,0,0.6);
      border: 1px solid rgba(0, 166, 255, 0.4);
      color: #00a6ff;
      padding: 0.5em 0.8em;
      margin-bottom: 1em;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-shadow: 1px 0.5px 1px #1900ff;
      text-align: center;
      width: 60%;
      font-size: 0.9em;
      opacity: 0;
      transform: translateX(-100%);
      animation: slideIn 0.5s ease-out forwards;
    }
    .menu-item.animated { animation: slideIn 0.5s ease-out forwards; }
    .menu-list .menu-item:nth-child(1) { animation-delay: 0s; }
    .menu-list .menu-item:nth-child(2) { animation-delay: 0.2s; }
    .menu-list .menu-item:nth-child(3) { animation-delay: 0.4s; }
    .menu-list .menu-item:nth-child(4) { animation-delay: 0.6s; }
    .menu-list .menu-item:nth-child(5) { animation-delay: 0.8s; }
    .menu-item:hover {
      background: rgba(0, 0, 0, 0.8);
      color: #00ffb3;
      border-color: #00ffb3;
    }

    #main {
      flex-grow: 1;
      background: #000;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-width: 0;
      overflow: hidden;
      padding: 2em;
      box-sizing: border-box;
    }

    #logo-btn {
      width: 350px;
      max-width: 90vw;
      height: auto;
      object-fit: contain;
      animation: pulse 2s infinite ease-in-out;
      z-index: 1;
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%) scale(2.3);
      transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out;
      
    }
   
    #logo-btn.loaded-img {   
      animation: fadeImage 1s ease-in-out; 
    }

    #modal {
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 2em;
      border-radius: 15px;
      box-shadow: 0 0 5px rgba(0, 166, 255, 0.3);
      opacity: 0;
      pointer-events: none;
      width: 60%;
      margin: auto 10px;
      max-width: 900px;
      max-height: 70vh;
      overflow-y: auto;
      backdrop-filter: blur(10px);
      transition: opacity 0.6s ease;
      z-index: 3;
      position: relative;
    }
    #modal.show { opacity: 1; pointer-events: auto; }
    #modal.fade-out { opacity: 0; pointer-events: none; }
    #modal-content { text-align: left; max-width: 800px; }


    @media (max-width: 400px) {
  .menu-item {
    font-size: 1em;
    padding: 0.8em;
  }

  #sidebar-logo {
    width: 200px;
  }
}


    /* — Responsive — */
    @media (max-width: 768px) {
  #sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    padding: 1em 0;
    background: #111;
    z-index: 999;
  }

  #sidebar-content {
  justify-content: flex-start;
  padding-top: 4vh;
  flex-grow: 1;
}



#sidebar-logo {
  display: block !important;
  width: 230px;
  margin: 0 auto 2vh auto; /* centrato, con un margine sotto più snello */
}


.menu-list:not(#submenu-servizi) {
  margin-top: 6vh;
  padding: 0 1em;
  align-items: center;
}



  .menu-item {
    font-size: 1em;
    padding: 0.6em 0.8em;
    margin: 0.3em auto;
    width: 90vw;
    max-width: 90vw;
    min-height: 45px;
    text-align: center;
    opacity: 1 !important;
    transform: none !important;
    animation: none !important;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .menu-item.sotto-servizio:last-child {
    font-size: 0.9em;
    margin-top: 1em;
    margin-bottom: 0.5em;
    padding: 0.6em;
    width: 85vw;
    max-width: 85vw;
    background: rgba(0, 0, 0, 0.4);
    border: 1px dashed #00a6ff;
    color: #00a6ff;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #main {
    margin-bottom: 60px;
    padding: 1em;
    overflow-y: auto;
  }

  #logo-btn {
    width: 50vw;
    max-height: 20vh;
  }

  #modal {
    width: 90vw;
    max-height: 80vh;
    padding: 1em;
    box-shadow: none;
    z-index: 1000;
  }

  .modal-close {
    display: block;
    position: absolute;
    top: 8px;
    right: 8px;
    background: transparent;
    border: none;
    font-size: 1.5rem;
    color: #fff;
    cursor: pointer;
    z-index: 1001;
  }
}





/* — Tablet only: da 769px a 1024px — */
@media (min-width: 769px) and (max-width: 1024px) {

/* 1) Sidebar full-screen come in mobile */
#sidebar {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  flex-direction: column;
  align-items: stretch;
  padding: 1.5em 0;
  background: #111;
  z-index: 999;
}

/* 2) Logo piccolo */
#sidebar-logo {
  display: block !important;
  width:270px;          /* leggermente più grande del mobile */
  margin: 0.5em auto;
}

/* 3) Bottoni menu più grandi */
.menu-item {
  font-size: 1.1em;
  padding: 0.8em 1em;
  margin: 0.5em 0;
  width: 100%;
  text-align: left;
}

/* 4) Mostra la “×” */
.modal-close {
  display: block;
  position: absolute;
  top: 8px; right: 8px;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  color: #fff;
  cursor: pointer;
  z-index: 10;
}
}
ul.custom-list li {
  /* solo spazio tra le voci */
  margin-bottom: 1em;
  /* testo normale in bianco */
  color: #fff;
}

ul.custom-list li:last-child {
  margin-bottom: 0;
}

/* titolo in blu */
ul.custom-list li > strong {
  color: #00a6ff;
}




.menu-item,
.menu-item.sotto-servizio {
  position: relative;
  overflow: visible;
  z-index: 0;
}

/* Bordo statico */
.menu-item::before {
  content: '';
  position: absolute;
  inset: 0;
  border: 1px solid #00a6ff;
  border-radius: 8px;
  z-index: 1;
  pointer-events: none;
}

.menu-item::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 8px;
  pointer-events: none;
  z-index: 1;
  background:
  linear-gradient(90deg, transparent 0%, #00ffff 95%, transparent 100%) top left / 400% 2px no-repeat,
  linear-gradient(180deg, transparent 0%, #00ffff 95%, transparent 100%) top right / 2px 400% no-repeat,
  linear-gradient(270deg, transparent 0%, #00ffff 95%, transparent 100%) bottom right / 400% 2px no-repeat,
  linear-gradient(0deg, transparent 0%, #00ffff 95%, transparent 100%) bottom left / 2px 400% no-repeat;





  background-repeat: no-repeat;
  -webkit-mask-image: linear-gradient(#fff 0 0);
  -webkit-mask-composite: destination-in;
  mask-image: linear-gradient(#fff 0 0);
  mask-composite: intersect;
  animation: outlineSweep var(--duration) ease-in-out infinite;
  animation-delay: var(--delay, 0s);


}



@keyframes outlineSweep {
  0% {
    background-position:
      0% 0%, 100% 0%, 100% 100%, 0% 100%;
  }
  100% {
    background-position:
      300% 0%, 100% 300%, -200% 100%, 0% -200%;
  }
}



</style>
</head>

<body>
    <div id="right-glow"></div>
  
    <div id="orientation-warning">
      <div class="orientation-content">
        <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"
             viewBox="0 0 24 24" fill="#00a6ff">
          <path d="M17 15h2V7h-2v8zm0 4h2v-2h-2v2zm-4-8h2V3h-2v8zm0
                   4h2v-2h-2v2zM9 9h2V7H9v2zm0 4h2v-2H9v2zm0-8h2V3H9v2zm0
                   12h2v-2H9v2zm-4-4h2v-2H5v2zm0-4h2V7H5v2zm0-4h2V3H5v2zm0
                   12h2v-2H5v2z"/>
        </svg>
        <p>Ruota il telefono in verticale per vedere il sito</p>
      </div>
    </div>
  
    <div id="sidebar">
      <div id="sidebar-content">
        <div id="sidebar-logo" onclick="location.reload();">
          <img src="logo.png" alt="Logo">
        </div>
  
        <div class="menu-list">
          <div class="menu-item" onclick="apri(0)">Chi siamo</div>
          <div class="menu-item" onclick="toggleSubmenu()">I nostri servizi</div>
          <div class="menu-item" onclick="apri(1)">Portfolio</div>
          <div class="menu-item" onclick="apri(2)">Preventivi e Contatti</div>
  
          <!-- SOTTOMENU VISIBILE SOLO AL CLICK -->
          <div id="submenu-servizi" style="display:none; flex-direction: column; align-items: center; width: 100%;">
            <div class="menu-item sotto-servizio" onclick="apriSubservizio('service')">Service</div>
            <div class="menu-item sotto-servizio" onclick="apriSubservizio('antincendio')">Sicurezza Antincendio</div>
            <div class="menu-item sotto-servizio" onclick="apriSubservizio('progettazione')">Progettazione e Soluzioni su misura</div>
            <div class="menu-item sotto-servizio" onclick="apriSubservizio('noleggio')">Noleggio</div>
            <div class="menu-item sotto-servizio" onclick="apriSubservizio('assistenza')">Centro Assistenza Riparazioni</div>
            <div class="menu-item sotto-servizio" onclick="ripristinaMenuPrincipale()" style="margin-top: 2em; font-size: 0.85em; opacity: 0.8;">🔙 Torna al menu principale</div>
          </div>
        </div>
      </div>
    </div>
  
    <div id="showroom-orientation">
        <div>
          <svg width="120" height="120" viewBox="0 0 24 24" fill="#00a6ff" style="margin-bottom:1em">
            <path d="M17 15h2V7h-2v8zm0 4h2v-2h-2v2zm-4-8h2V3h-2v8zm0
                     4h2v-2h-2v2zM9 9h2V7H9v2zm0 4h2v-2H9v2zm0-8h2V3H9v2zm0
                     12h2v-2H9v2zm-4-4h2v-2H5v2zm0-4h2V7H5v2zm0-4h2V3H5v2zm0
                     12h2v-2H5v2z"/>
          </svg>
          <p>Gira lo schermo per visualizzare la showroom<br>e riportalo in verticale per chiuderla.</p>
        </div>
      </div>
      



    <div id="main">
      <img src="logo.png" id="logo-btn" alt="Logo">
      <div id="modal" class="modal">
        <div id="modal-content"><h2>Caricamento...</h2></div>
      </div>
    </div>
  
   

    <script>
        // 1) Variabili di stato
        let modal             = document.getElementById('modal');
        let modalContent      = document.getElementById('modal-content');
        let isTransitioning   = false;
        let slideshowAttivo   = false;
        let slideshowInterval = null;
        let showroomRequested = false;
        let showroomActive    = false;
        let currentIndex      = null;
        let welcomeTimeout    = null;
        let welcomeShown      = false;
      
        // warning overlay
        const warnMain = document.getElementById('orientation-warning');
        const warnShow = document.getElementById('showroom-orientation');
      
        // 2) Delegate “Clicca qui” (solo mobile)
        document.body.addEventListener('click', e => {
          if (!/Mobi|Android/i.test(navigator.userAgent)) return;
          if (e.target.matches('span[onclick="attivaSlideshow()"]')) {
            e.preventDefault();
            showroomRequested = true;
            warnMain.classList.remove('show');
            warnShow.classList.add('show');
          }
        });
      
        // 3) Contenuti modali
        const contenuti = [
          `<!-- Chi siamo -->
          <div style="text-align:center;">
            <h2>Chi siamo</h2>
            <h3 style="color:#00a6ff; margin-top:0;">Base Elettronica Service</h3>
          </div>
          <p style="text-align:justify;">
            Siamo una realtà consolidata con oltre 30 anni di esperienza nel settore della tecnologia applicata agli eventi, agli ambienti professionali e agli impianti integrati.
          </p>
          <p>
            Operiamo su tutto il territorio nazionale offrendo servizi altamente specializzati nella <em>progettazione, installazione e gestione</em> di impianti <strong>audio, video, luci, sicurezza, automazione e antincendio</strong>, con un approccio multidisciplinare che integra know-how tecnico, creatività progettuale e rigore normativo.
          </p>
          <p>
            Il nostro team è composto da tecnici qualificati, progettisti certificati e operatori esperti, in grado di affrontare ogni fase operativa: dal sopralluogo iniziale alla consegna chiavi in mano, passando per modellazione acustica, rendering 3D, collaudi funzionali e formazione all’utilizzo delle tecnologie installate.
          </p>
          <p>
            Collaboriamo con enti pubblici, aziende private, studi di architettura, service per lo spettacolo e broadcaster televisivi, adattando ogni progetto alle esigenze specifiche del cliente con <strong>soluzioni su misura, scalabili e ad alta efficienza</strong>.
          </p>
          <p>
            Lavoriamo con attrezzature all’avanguardia e standard qualitativi elevati, ponendoci come partner di riferimento per eventi live, showroom, installazioni fisse, studi televisivi, ambienti immersivi e produzioni ad alto impatto tecnologico.
          </p>`,
      
          `<!-- Portfolio -->
          <h2>Portfolio</h2>
          <p>
            Nel corso degli anni abbiamo contribuito alla realizzazione tecnica e progettuale di numerosi eventi, installazioni e ambienti professionali in tutta Italia. Il nostro portfolio riflette la varietà e l’elevato standard qualitativo dei servizi offerti.
          </p>
          <ul>
            <li><strong style="color:#00a6ff;">Festival Nazionali e Tour Musicali</strong>: service completo per eventi live, dalla fase di pre-produzione alla regia tecnica in loco, con artisti di fama nazionale e internazionale.</li>
            <li><strong style="color:#00a6ff;">Installazioni in teatri e auditorium</strong>: sistemi fissi audio/luci/video integrati per spettacoli, musical, conferenze e produzioni culturali, con controllo centralizzato e interfacce utente dedicate.</li>
            <li><strong style="color:#00a6ff;">Soluzioni per centri congressi e showroom</strong>: impianti multimediali e di traduzione simultanea, videowall, microfonazione digitale e ambienti immersivi per la presentazione di brand e prodotti.</li>
            <li><strong style="color:#00a6ff;">Supporto tecnico per fiere, sfilate e dirette streaming</strong>: copertura A/V integrata, cablaggi fibra, ponti radio e mixer broadcast, con assistenza tecnica continua.</li>
            <li><strong style="color:#00a6ff;">Realizzazione di studi televisivi</strong>: progettazione e allestimento completo di ambienti televisivi e regie broadcast, con sistemi di illuminazione a LED, fondali scenografici, cablaggi audio/video digitali, pareti acustiche e regia IP-ready per produzioni live e on demand.</li>
          </ul>
          <p style="margin-top:1.5em;">
            <em><span role="button" onclick="apri(2)" style="color:#00ffb3; text-decoration:none; cursor:pointer;">Contattaci</span></em>
            &nbsp;&nbsp;per ricevere un portfolio dettagliato con referenze certificate, fotografie dei lavori realizzati e descrizioni tecniche complete.
          </p>
          <p style="margin-top:1.5em;">
            <em><span role="button" onclick="attivaSlideshow()" style="color:#00ffb3; text-decoration:none; cursor:pointer;">Clicca qui</span></em>
            &nbsp;&nbsp;per avviare una piccola anteprima nella showroom interattiva.
          </p>`,
      
          `<!-- Contattaci -->
          <h2>Contattaci</h2>
          <p>
            Hai un progetto da realizzare, un evento da organizzare o necessiti di assistenza tecnica? Il nostro team è a tua disposizione per consulenze, preventivi gratuiti e sopralluoghi personalizzati.
          </p>
          <p>
            Compila il modulo sottostante per essere ricontattato dal nostro CEO <strong>Fabrizio Di Filippo</strong> o da un nostro tecnico incaricato.
          </p>
          <form id="contact-form" style="display:flex; flex-direction:column; gap:1em; backdrop-filter:blur(10px); background:rgba(0,0,0,0.5); padding:2em; border-radius:15px; border:1px solid rgba(0,166,255,0.2); box-shadow:0 0 5px rgba(0,166,255,0.3);">
            <label>
              <span style="display:block; margin-bottom:0.3em;">Nome e Cognome</span>
              <input type="text" placeholder="Mario Rossi" required style="width:100%; padding:0.75em; background:rgba(10,10,10,0.7); border:1px solid #00a6ff; color:#fff; border-radius:8px;">
            </label>
            <label>
              <span style="display:block; margin-bottom:0.3em;">Email</span>
              <input type="email" placeholder="tu@email.it" required style="width:100%; padding:0.75em; background:rgba(10,10,10,0.7); border:1px solid #00a6ff; color:#fff; border-radius:8px;">
            </label>
            <label>
              <span style="display:block; margin-bottom:0.3em;">Messaggio</span>
              <textarea rows="10" placeholder="Descrivi il tuo progetto…" required style="width:100%; padding:0.75em; background:rgba(10,10,10,0.7); border:1px solid #00a6ff; color:#fff; border-radius:8px;"></textarea>
            </label>
            <button type="submit" style="padding:0.8em 1.5em; background:#00a6ff; color:#000; border:none; border-radius:8px; font-weight:bold;">
              Invia Richiesta
            </button>
          </form>
          <p style="margin-top:1em;">
            Preferisci scriverci direttamente? Scrivi a
            <a href="mailto:info@baseelettronica.it" style="color:#00ffb3;">info@baseelettronica.it</a>
          </p>`
        ];
      
        const contenutoHome = `
          <h2>Benvenuti in Base Elettronica Service</h2>
          <p>
            Siamo il partner ideale per progettazione, noleggio e gestione tecnica di impianti audio, video, luci e sicurezza per eventi e installazioni professionali.<br><br>
            Scopri di più esplorando il nostro sito!
          </p>`;
      
        // 4) Apertura/chiusura modale
        function apri(index) {
          if (isTransitioning) return;
          isTransitioning = true;
          if (currentIndex === index) {
            modal.classList.remove('show');
            modal.classList.add('fade-out');
            setTimeout(() => {
              modal.classList.remove('fade-out');
              modalContent.innerHTML = '';
              currentIndex = null;
              isTransitioning = false;
            }, 600);
          } else {
            const nuovo = contenuti[index];
            if (modal.classList.contains('show')) {
              modal.classList.remove('show');
              modal.classList.add('fade-out');
              setTimeout(() => {
                modalContent.innerHTML = nuovo;
                modal.classList.remove('fade-out');
                modal.classList.add('show');
                currentIndex = index;
                isTransitioning = false;
              }, 600);
            } else {
              modalContent.innerHTML = nuovo;
              modal.classList.add('show');
              currentIndex = index;
              isTransitioning = false;
            }
          }
        }
      
        // 5) Toggle sottomenu
        function toggleSubmenu() {
          document.querySelectorAll('.menu-list > .menu-item:not(#submenu-servizi .menu-item)')
                  .forEach(el => el.style.display = 'none');
          document.getElementById('submenu-servizi').style.display = 'flex';
        }
      
        // 6) Ripristina menu principale
        function ripristinaMenuPrincipale() {
          if (isTransitioning) return;
          isTransitioning = true;
          if (modal.classList.contains('show')) {
            modal.classList.remove('show');
            modal.classList.add('fade-out');
            setTimeout(() => {
              modal.classList.remove('fade-out');
              modalContent.innerHTML = '';
              isTransitioning = false;
            }, 600);
          }
          document.getElementById('submenu-servizi').style.display = 'none';
          document.querySelectorAll('.menu-list > .menu-item')
                  .forEach(el => el.style.display = 'flex');
          currentIndex = null;
          clearInterval(slideshowInterval);
          slideshowAttivo = false;
        }
      
        // 7) Apri servizi specifici
        function apriSubservizio(tipo) {
          if (isTransitioning) return;
          let html = '';
          switch (tipo) {
            case 'service':
              html = `<h2>Service Tecnico per Eventi e Spettacoli</h2>
                      <p>Offriamo un servizio integrato…</p>
                      <ul class="custom-list">…</ul>`;
              break;
            case 'antincendio':
              html = `<h2>Sistemi di Sicurezza Antincendio</h2>
                      <ul class="custom-list">…</ul>`;
              break;
            case 'progettazione':
              html = `<h2>Progettazione Ambienti e Soluzioni su Misura</h2>
                      <ul class="custom-list">…</ul>`;
              break;
            case 'noleggio':
              html = `<h2>Noleggio di Attrezzature Professionali</h2>
                      <ul class="custom-list">…</ul>`;
              break;
            case 'assistenza':
              html = `<h2>Centro Assistenza Tecnica e Riparazioni</h2>
                      <ul class="custom-list">…</ul>`;
              break;
          }
          isTransitioning = true;
          if (modal.classList.contains('show')) {
            modal.classList.remove('show');
            modal.classList.add('fade-out');
            setTimeout(() => {
              modalContent.innerHTML = html;
              modal.classList.remove('fade-out');
              modal.classList.add('show');
              isTransitioning = false;
            }, 600);
          } else {
            modalContent.innerHTML = html;
            modal.classList.add('show');
            isTransitioning = false;
          }
          currentIndex = null;
        }
      
        // 8) Clic fuori per chiudere (solo se non ci sono form o paragrafi attivi)
        modalContent.addEventListener('click', e => {
          if (
            currentIndex === null &&
            modal.classList.contains('show') &&
            !isTransitioning &&
            !e.target.closest('form') &&
            !e.target.closest('.custom-list') &&
            !e.target.closest('p')
          ) {
            isTransitioning = true;
            modal.classList.remove('show');
            modal.classList.add('fade-out');
            setTimeout(() => {
              modal.classList.remove('fade-out');
              modalContent.innerHTML = '';
              isTransitioning = false;
            }, 600);
          }
        });
      
        // 9) Slideshow showroom
        function attivaSlideshow() {
          if (slideshowAttivo) return;
          slideshowAttivo = true;
          clearInterval(slideshowInterval);
          modal.classList.contains('show') && modal.classList.remove('show');
      
          const immagini = [
            'image_background/img1.jpg',
            'image_background/img2.jpg',
            'image_background/img3.jpg',
            'image_background/img4.jpg',
            'image_background/img5.jpg',
            'image_background/img6.jpg',
            'image_background/img7.png',
            'image_background/img8.png',
            'image_background/img9.png',
            'image_background/img10.png'
          ];
          let idx = Math.floor(Math.random() * immagini.length);
          const logo = document.getElementById('logo-btn');
      
          const changeImage = () => {
            const img = new Image();
            img.src = immagini[idx];
            img.onload = () => {
              logo.style.opacity = '0';
              setTimeout(() => {
                logo.src = img.src;
                logo.classList.remove('loaded-img');
                void logo.offsetWidth;
                logo.classList.add('loaded-img');
                logo.style.opacity = '1';
              }, 50);
            };
            idx = (idx + 1) % immagini.length;
          };
          changeImage();
          slideshowInterval = setInterval(changeImage, 5000);
        }
      
        // 10) Click logo principale
        document.getElementById('logo-btn').addEventListener('click', () => {
          clearTimeout(welcomeTimeout);
          if (isTransitioning) return;
          isTransitioning = true;
          if (modal.classList.contains('show')) {
            modal.classList.remove('show');
            modal.classList.add('fade-out');
            setTimeout(() => {
              modalContent.innerHTML = contenutoHome;
              modal.classList.remove('fade-out');
              modal.classList.add('show');
              isTransitioning = false;
            }, 600);
          } else {
            modalContent.innerHTML = contenutoHome;
            modal.classList.add('show');
            isTransitioning = false;
          }
          welcomeShown = true;
        });
      
        // 11) Click logo sidebar
        document.getElementById('sidebar-logo').addEventListener('click', () => {
          if (isTransitioning) return;
          clearInterval(slideshowInterval);
          slideshowAttivo = false;
          const logo = document.getElementById('logo-btn');
          logo.style.visibility = 'hidden';
          logo.style.opacity = '0';
          isTransitioning = true;
          const preload = new Image();
          preload.src = 'logo.png';
          preload.onload = () => {
            logo.src = preload.src;
            logo.style.visibility = 'visible';
            logo.style.opacity = '1';
            setTimeout(() => isTransitioning = false, 600);
          };
          if (modal.classList.contains('show')) {
            modal.classList.remove('show');
            modalContent.innerHTML = '';
            currentIndex = null;
          }
        });
      
        // 12) Submit form di contatto
        document.addEventListener('submit', e => {
          if (e.target.matches('#contact-form')) {
            e.preventDefault();
            modalContent.innerHTML = `
              <div style="text-align:center; padding:1em;">
                <h2>Grazie di averci contattato!</h2>
                <p>Risponderemo entro 24 ore.</p>
              </div>`;
            modal.classList.remove('fade-out');
            modal.classList.add('show');
            setTimeout(() => {
              modal.classList.remove('show');
              modal.classList.add('fade-out');
              setTimeout(() => {
                modalContent.innerHTML = contenutoHome;
                currentIndex = null;
              }, 600);
            }, 3000);
          }
        });
      
        // 13) Controllo orientamento
        function checkOrientation() {
          const isLandscape = window.matchMedia('(orientation: landscape)').matches;
          if (!/Mobi|Android/i.test(navigator.userAgent)) {
            warnMain.classList.remove('show');
            warnShow.classList.remove('show');
            return;
          }
          if (!showroomRequested) {
            isLandscape ? warnMain.classList.add('show')
                        : warnMain.classList.remove('show');
            warnShow.classList.remove('show');
          } else {
            warnMain.classList.remove('show');
            if (!showroomActive) {
              if (!isLandscape) warnShow.classList.add('show');
              else {
                warnShow.classList.remove('show');
                showroomActive = true;
                attivaSlideshow();
              }
            } else {
              if (!isLandscape) {
                warnShow.classList.remove('show');
                showroomRequested = false;
                showroomActive    = false;
                clearInterval(slideshowInterval);
                ripristinaMenuPrincipale();
              }
            }
          }
        }
      
        // 14) Welcome popup automatico
        welcomeTimeout = setTimeout(() => {
          modalContent.innerHTML = contenutoHome;
          modal.classList.add('show');
          welcomeShown = true;
          document.addEventListener('click', e => {
            if (
              !e.target.closest('#sidebar') &&
              !e.target.closest('.menu-item') &&
              !e.target.closest('#modal') &&
              !e.target.closest('#logo-btn')
            ) {
              modal.classList.remove('show');
            }
          }, { once: true });
        }, 500);
      
        // 15) Eventi di resize/orientationchange
        window.addEventListener('load', checkOrientation);
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);
      </script>
      
</body>
</html>
